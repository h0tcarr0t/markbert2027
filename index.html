<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Column Layout</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Squada+One&family=IBM+Plex+Sans+JP:wght@700&family=Raleway:wght@300;400&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Left Column: Fixed Spline Model -->
    <div class="left-column">
        <spline-viewer id="spline-viewer"></spline-viewer>
    </div>

    <!-- Load correct Spline model based on device (before spline-viewer.js loads) -->
    <script>
        (function() {
            const desktopUrl = 'https://prod.spline.design/lOX2x8duNf5OfECq/scene.splinecode';
            const mobileUrl = 'https://prod.spline.design/g2JzIkEz6703ZuSR/scene.splinecode';
            const isMobile = window.innerWidth <= 768;
            
            document.getElementById('spline-viewer').setAttribute('url', isMobile ? mobileUrl : desktopUrl);
        })();
    </script>

    <!-- Right Column: Scrollable Content -->
    <div class="right-column">
        <div class="section section-1">
            <h1>SAVE THE DATE</h1>
            <h2>Because Mark & Rob are getting married!</h2>
        </div>
        <div class="section section-2">
            <h1>01.02.2027</h1>
            <h2>at</h2>
            <h1 class="no-dot">BRICK YARD 33</h1>
            <h1 class="no-dot chinese-text">美軍俱樂部</h1>
            <h2>Taipei, Taiwan</h2>
        </div>
        <div class="section section-3">
            <h1>FLIGHTS & HOTELS</h1>
            <h2>As this is a destination wedding in Taiwan during new years, we recommend booking your hotel and flights early. Here are some recommendations:</h2>
        </div>
        <div class="section section-4">
            <h1>FAQ</h1>
            <h2>Can I bring a plus-one?</h2>
        </div>
        <div class="section section-5">
            <h1>RSVP</h1>
            <h2>Please only RSVP for yourself</h2>
            <div id="rsvp-widget"></div>
        </div>
    </div>

    <!-- Spline Viewer Script -->
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.18/build/spline-viewer.js"></script>

    <!-- Forward scroll events from left column to right column (custom smooth scroll) -->
    <script>
        const leftColumn = document.querySelector('.left-column');
        const rightColumn = document.querySelector('.right-column');

        let isScrolling = false;
        let targetScroll = 0;

        // Custom smooth scroll with adjustable settings
        const scrollSettings = {
            speed: 0.08,      // How fast it catches up (0.01 = very slow, 0.2 = fast)
            multiplier: 1     // How much to scroll per wheel tick
        };

        function smoothScroll() {
            if (!isScrolling) return;

            const currentScroll = rightColumn.scrollTop;
            const diff = targetScroll - currentScroll;

            // Stop if we're close enough
            if (Math.abs(diff) < 0.5) {
                rightColumn.scrollTop = targetScroll;
                isScrolling = false;
                return;
            }

            // Ease toward target
            rightColumn.scrollTop += diff * scrollSettings.speed;
            requestAnimationFrame(smoothScroll);
        }

        // Left column scroll - use custom smooth scroll
        leftColumn.addEventListener('wheel', (e) => {
            e.preventDefault();

            // Update target scroll position
            targetScroll = Math.max(
                0,
                Math.min(
                    rightColumn.scrollHeight - rightColumn.clientHeight,
                    targetScroll + (e.deltaY * scrollSettings.multiplier)
                )
            );

            // Start animation if not already running
            if (!isScrolling) {
                isScrolling = true;
                targetScroll = rightColumn.scrollTop + (e.deltaY * scrollSettings.multiplier);
                smoothScroll();
            }
        }, { passive: false });

        // Right column scroll - sync target to prevent bounce back
        rightColumn.addEventListener('wheel', () => {
            // Stop any ongoing animation and sync target to current position
            isScrolling = false;
            targetScroll = rightColumn.scrollTop;
        });

        // Also sync on direct scroll (touch, scrollbar drag, etc.)
        rightColumn.addEventListener('scroll', () => {
            if (!isScrolling) {
                targetScroll = rightColumn.scrollTop;
            }
        });
    </script>
<script>
    (function (w, d, s, o, f, js, fjs) {
      w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };
      js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];
      js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);
    }(window, document, 'script', 'oursvp', 'https://www.oursvp.app/widget/widget.js'));
    oursvp('init', { 
      element: document.getElementById('rsvp-widget'),
      eventId: '7ve6uq43AknI0wLathOd',
      showBackBtn: false,
      language: 'english'
    }); 
    // rsvp styling 
    document.body.style.setProperty('--heading-color', '#f0f0f0');
    document.body.style.setProperty('--text-color', '#f0f0f0');
    document.body.style.setProperty('--bg-color', '#16a857');
    document.body.style.setProperty('--button-text-color', '#000000');
    document.body.style.setProperty('--border-color', '#16a857');
    document.body.style.setProperty('--button-bg-color', '#1bec7b');
  </script>
</body>
</html>
